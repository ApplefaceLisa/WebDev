<!DOCTYPE html>
<html>
<head>
    <title>Travel insurance selection tool</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div class="box" id="navigator">
  </div>
  <div class="box" id="plans">
    <div class="header">
      <h1>Available Plans</h1>
    </div>
    <div class="content" id="plan_list">
      <!-- plan list will be added here -->
    </div>
  </div>
  <div class="box" id="limited_coverage">
    <div class="header">
        <h1>Limited Coverage</h1>
    </div>
    <!-- plans detail will be added here -->
  </div>
  <div class="box" id="comprehensive_coverage">
    <div class="header">
        <h1>Comprehensive Coverage</h1>
    </div>
    <!-- plans detail will be added here -->
  </div>
  <div class="box" id="insured_info">
    <div class="header">
      <h1>Personal Details</h1>
    </div>
    <div class="info">
      <div class="title">
        <h2>Insured #<span>1</span></h2>
      </div>
      <table>
        <tr>
          <td>Name <span class="red">* </span></td>
          <td><input type="text" name="name" required></td>
        </td>
        <tr>
          <td>Address <span class="red">* </span></td>
          <td><input type="text" name="address" required></td>
        </tr>
        <tr>
          <td></td>
          <td><input type="text" name="address"></td>
        </tr>
        <tr>
          <td>Start date <span class="red">* </span></td>
          <td><input type="date" name="sod"></td>
        </tr>
        <tr>
          <td>End date <span class="red">* </span></td>
          <td><input type="date" name="eod"></td>
        </tr>
      </table>
    </div>
    <div class="flex_box2">
        <p>+ <a href="#">Add more insured</a></p>
        <button><a href="#success">Submit</a></button>
    </div>
  </div>
  <div class="box" id="success">
    <h1 style="text-align: center;">Submit Successful!</h1>
  </div>
</body>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsrender/0.9.84/jsrender.min.js"></script>

<script id="planlistTmpl" type="text/x-jsrender">
    <div class="subbox">
        <h2>{{:name}}</h2>
        <p>
            {{:intro}}
        </p>
        <div class="right">
          <button><a href = {{:href}}>Select</a></button>
        </div>
    </div>
</script>

<script id="planTmpl" type="text/x-jsrender">
    <div class="content">
      <div class="flex_box">
        <div class="name {{:class}}">
          <div class="text"><p>{{:name}}</p></div>
        </div>
        <div class="details">
          <h2>{{:name}}</h2>
          <p>{{:details}}</p>
        </div>
      </div>
      <div class="right light_green">
        <button><a href = {{:href}}>Select</a></button>
      </div>
    </div>
</script>

<script type="application/javascript">
//
    var $path = [];
    $(window).on("hashchange", function() {
        // Read hash
        var targetScreen = location.hash;
        // Hide all other screen first
        $(".box").hide();
        // Show the target screen
        $(targetScreen).show();
        // Show the path info
        showPath(targetScreen);
    });
    // Set default screen
    location.hash = "plans";

    function showPath(target) {
      var index = $path.indexOf(target);
      if (index === -1) {
        $path.push(target);
      } else {
        $path = $path.slice(0, index+1);
      }

      if ($path.length < 2) {
        $('#navigator').hide();
        return;
      }

      var tmp = $path[0];
      var $html = "<a href = " + tmp + ">" + extractName(tmp) + "</a>";
      for (var i = 1; i < $path.length; i++) {
        tmp = $path[i];
        $html += " >> " + "<a href = " + tmp + ">" + extractName(tmp) + "</a>";
      }
      $('#navigator').html($html).show();
    }

    function extractName(str) {
      return str.slice(str.indexOf("#") + 1);
    }
//
var limited = [
  {
    "name": "Limited Plan A" ,
    "details" : "Limited Plan A provides basic medical coverage for non-U.S. citizens, who come to the U.S. for business, pleasure, to study, or to immigrate with a maximum coverage of $120,000.",
    "class" : "gradient_orange",
    "href" : "#insured_info"
  },
  {
    "name": "Limited Plan B",
    "details" : "Limited Plan B provides basic medical coverage for non-U.S. citizens, who come to the U.S. for business, pleasure, to study, or to immigrate with a maximum coverage of $140,000.",
    "class" : "gradient_orange",
    "href" : "#insured_info"
  }
];

var comprehensive = [
  {
    "name" : "Comprehensive Plan A",
    "details" : "Plan-A offers medical coverage and emergency services to individuals and families travelling outside their Home Countries.",
    "class" : "gradient_blue",
    "href" : "#insured_info"
  },
  {
    "name" : "Comprehensive Plan B",
    "details" : "Plan-B offers medical coverage and emergency services to individuals and families travelling outside their Home Countries. The plan pays 75% of eligible expenses to the selected Medical Maximum.",
    "class" : "gradient_blue",
    "href" : "#insured_info"
  },
  {
    "name" : "Comprehensive Plan C",
    "details" : "Plan-C offers medical coverage and emergency services to individuals and families travelling outside their Home Countries. The plan pays 90% of eligible expenses to the selected Medical Maximum.",
    "class" : "gradient_blue",
    "href" : "#insured_info"
  }
];

function renderPlanDetails(planData, planId) {
    var template = $.templates("#planTmpl");
    var content = template.render(planData);
    $(planId).append(content);
};

renderPlanDetails(limited, "#limited_coverage");
renderPlanDetails(comprehensive, "#comprehensive_coverage");

// render plan list
var planList = [
          {
            "name" : "Limited Coverage",
            "intro" : "Limited coverage plan provides the basic protection, and may not be adequate. It may cost you less, but the coverage is limited to pre defined clause of fixed amout of charges. Must read policy details for benefit and coverage details.",
            "href" : "#limited_coverage"
          },
          {
            "name" : "Comprehensive Coverage",
            "intro" : "These plans offer much better and flexible coverage. Most of these plans work like PPO type of 80-20% plan. Means insured have to pay 20% of the cost for the first 5,000 per policy period policy pays rest 80%.",
            "href" : "#comprehensive_coverage"
          }
        ];
function renderPlans(plans) {
    var template = $.templates("#planlistTmpl");
    var content = template.render(plans);
    $("#plan_list").append(content);
}
renderPlans(planList);
/*
    $(window).on("hashchange", function() {
        // Read hash
        var targetScreen = location.hash;
        // Hide all other screen first
        $(".box").hide();
        // Show the target screen
        $(targetScreen).show();
    });
    // Set default screen
    location.hash = "plans";
*/
</script>
</html>
